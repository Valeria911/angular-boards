<h2 class="text-center mb-4">Mi Perfil</h2>

<div class="card mx-auto" style="max-width: 420px;">
  <div class="card-body">

    <form [formGroup]="formPerfil" (ngSubmit)="guardarCambios()">

      <!-- Nombre -->
      <div class="mb-3">
        <label class="form-label fw-bold">Nombre completo</label>
        <input class="form-control"
               formControlName="nombre"
               [class.is-invalid]="formPerfil.get('nombre')?.touched && formPerfil.get('nombre')?.invalid">

        <div class="invalid-feedback">Ingresar nombre</div>
      </div>

      <!-- Usuario -->
      <div class="mb-3">
        <label class="form-label fw-bold">Usuario</label>
        <input class="form-control"
               formControlName="usuario"
               [class.is-invalid]="formPerfil.get('usuario')?.touched && formPerfil.get('usuario')?.invalid">

        <div class="invalid-feedback">Ingresar nombre de usuario</div>
      </div>

      <!-- Email (no editable) -->
      <div class="mb-3">
        <label class="form-label fw-bold">Correo electrónico registrado</label>
        <input class="form-control" formControlName="email">
      </div>

      <!-- Password -->
      <div class="mb-3">
        <label class="form-label fw-bold">Contraseña</label>

        <div class="input-group">
          <input 
            [type]="mostrarPassword ? 'text' : 'password'"
            class="form-control"
            formControlName="password"
            [class.is-invalid]="formPerfil.get('password')?.touched && formPerfil.get('password')?.invalid">

          <button type="button" class="btn btn-outline-secondary" (click)="togglePassword()">
            {{ mostrarPassword ? 'Ocultar' : 'Mostrar' }}
          </button>
        </div>

        <div class="invalid-feedback" *ngIf="formPerfil.get('password')?.errors?.['required']">
          Ingresar contraseña
        </div>

        <div class="invalid-feedback" *ngIf="formPerfil.get('password')?.errors?.['pattern']">
          Debe incluir una mayuscula y un número
        </div>
      </div>

      <!-- Tipo -->
      <div class="mb-3">
        <label class="form-label fw-bold">Tipo de Usuario</label>
        <input class="form-control" formControlName="tipo">
      </div>

      <!-- Botón -->
      <div class="d-grid">
        <button type="submit" class="btn btn-light" [disabled]="formPerfil.invalid">
          Guardar Cambios
        </button>
      </div>

      <div class="text-success mt-3 text-center fw-bold" *ngIf="mensaje">
        {{ mensaje }}
      </div>

    </form>

  </div>
</div>
